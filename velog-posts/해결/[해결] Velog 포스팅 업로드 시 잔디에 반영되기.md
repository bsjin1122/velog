<blockquote>
<p> ğŸ’¥ schedulerë¥¼ ì ìš©í•´ë‘ì—ˆê¸° ë•Œë¬¸ì—, ì”ë””ì— ë°˜ì˜ ì—¬ë¶€ëŠ” ì¶”í›„ì— ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ë´ì•¼í•  ê²ƒ ê°™ë‹¤. </p>
</blockquote>
<img height="300" src="https://velog.velcdn.com/images/greendev/post/4998b59b-4638-4864-befe-ac68ef82c7ff/image.png" width="350" />

<h2 id="ìƒí™©">ìƒí™©</h2>
<blockquote>
<ul>
<li>ì™œ <code>velogì— ìë™ìœ¼ë¡œ ì»¤ë°‹í•˜ê¸°</code>ë§Œ ê¸€ì´ ì”ëœ© ìˆê³ , 
ì”ë””ë¡œ ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê±´ ì™œ ì•ˆ ì˜¬ë¼ ì˜¤ëŠ”ê±°ì•¼..! <br /><del>(ë¬¼ë¡  ë‚˜ë„ ë”°ë¼í–ˆì—ˆë‹¤)</del></li>
</ul>
</blockquote>
<ul>
<li><code>github-actions[bot]</code>ì´ github actionìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ê²½ìš°, Contribution(ì”ë””)ì— ë°˜ì˜ì´ ì•ˆë˜ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤.. <ul>
<li><img alt="" src="https://velog.velcdn.com/images/greendev/post/0ed23725-301d-47fb-83ae-10f399dfca3d/image.png" /></li>
<li>ì–´ì©ì§€ commitì€ triggerë¡œ github actionì´ ë„ëŠ”ë°, ì”ë””ê°€ ì•ˆì‹¬ì–´ì§€ê³  ìˆì—ˆë‹¤.</li>
</ul>
</li>
</ul>
<h2 id="ì‹œë„">ì‹œë„</h2>
<ul>
<li><a href="https://velog.io/@think2wice/Github-%EB%B6%84%EB%AA%85-commit%EC%9D%84-%ED%96%88%EB%8A%94%EB%8D%B0-%EC%99%9C-contribution-%EA%B7%B8%EB%9E%98%ED%94%84%EB%8A%94-%EC%95%88%EC%B1%84%EC%9B%8C%EC%A7%80%EC%A7%80">Github Contributorì˜ ê¸°ì¤€(ì”ë””ê°€ ì‹¬ì–´ì§€ëŠ” ê¸°ì¤€)</a></li>
<li><a href="https://www.hahwul.com/2020/10/18/how-to-trigger-github-action-manually/">[Github] 1. Contributions : ì”ë””ë°­ì— ëŒ€í•œ ëª¨ë“  ê²ƒ</a>
ì„ 1-2ì¼ ì°¾ì•„ë³´ë©´ì„œ, git configë¡œë„ ì‹œë„í•´ë³´ê³ .. ë¨¸ë¦¿ì†ìœ¼ë¡œ ê³ ë¯¼ì„ ì¢€ í–ˆì—ˆë‹¤. </li>
</ul>
<img src="https://velog.velcdn.com/images/greendev/post/a034a3c7-5dd2-4b2b-b494-df8c0e584eb7/image.png" width="300" />


<ul>
<li>ê·¸ëŸ¬ë˜ ì¤‘, Pull requestë¥¼ í†µí•˜ë©´, ì”ë””ê°€ ì‹¬ì–´ì§€ì§€ ì•Šì„ê¹Œ? ìƒê°ì„ í•´ë³´ê²Œ ë˜ì—ˆë‹¤.</li>
</ul>
<h2 id="í•´ê²°">í•´ê²°</h2>
<ul>
<li><p>Github Action marketpalce ì˜ </p>
<ul>
<li><a href="https://github.com/marketplace/actions/auto-pull-request">Auto Pull Request</a></li>
<li><a href="https://github.com/diillson/auto-pull-request">Github pull Request</a></li>
<li><a href="https://github.com/marketplace/actions/auto-approve">Auto Approve Github Action</a></li>
<li><a href="https://github.com/tgymnich/fork-sync?tab=readme-ov-file#auto-approve">Auto Approve Pull Reqeusts</a><ul>
<li><a href="https://github.com/tgymnich/fork-sync/issues/153">tgymnich/fork-sync@v1: ìŠ¤ìŠ¤ë¡œ ìƒì„±í•œ prì´ ìŠ¹ì¸ì´ ë˜ì§€ ì•Šì„ ë•Œ(ì°¸ê³ ìš©..)</a></li>
</ul>
</li>
</ul>
</li>
<li><p>ì´ ê¸€ì„ ì „ì²´ ì½ì–´ë³´ë©´ì„œ í•˜ë‚˜í•˜ë‚˜ì”© ì˜µì…˜ê°’ë“¤ì„ ëŒ€ì…í•´ì„œ ë„£ì–´ë³´ì•˜ë‹¤. ì‚¬ì‹¤ ë‚˜ëŠ” github actionì´ 2ë²ˆì§¸ ì‚¬ìš©í•˜ëŠ”ê±°ë¼ ê¹Œë§‰ëˆˆì´ë¼ ì‚½ì§ˆì„ ë„ˆë¬´ ë§ì´ í–ˆë‹¤..ğŸ¥º</p>
</li>
</ul>
<p><img alt="" src="https://velog.velcdn.com/images/greendev/post/fa0b9432-18ed-4130-b451-6b246343f36b/image.png" /></p>
<h2 id="ë°°ìš´-ê²ƒ">ë°°ìš´ ê²ƒ</h2>
<h3 id="1-githubì˜-ì‘ì—…ë‹¨ìœ„">1. Githubì˜ ì‘ì—…ë‹¨ìœ„</h3>
<ul>
<li>Githubì˜ ì‘ì—… ë‹¨ìœ„ëŠ” <code>Workflow, job, steps</code>ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒ</li>
</ul>
<h3 id="2---allow-empty">2. --allow-empty</h3>
<ol start="2">
<li>git commit <code>--allow-empty</code> ë³€ê²½ëœ ê²ƒì´ ì—†ì–´ë„, ë¹ˆ ê»ë°ê¸° ì»¤ë°‹ì„ ì˜¬ë¦´ ìˆ˜ ìˆë‹¤. </li>
</ol>
<h3 id="3---set-upstream">3. --set-upstream</h3>
<ol start="3">
<li>ë¡œì»¬ ë¸Œëœì¹˜ë¥¼ ì›ê²© ë¸Œëœì¹˜ì™€ ì—°ê²°í•˜ê¸°(--set-upstream)<ul>
<li><code>git branch --set-upstream-to=origin/&lt;remote-branch&gt; &lt;local-branch&gt;</code></li>
</ul>
</li>
</ol>
<h3 id="4-steps-ê°„ì—-outputsê°’-ì°¸ì¡°í•˜ê¸°">4. steps ê°„ì— outputsê°’ ì°¸ì¡°í•˜ê¸°</h3>
<ol start="4">
<li>github actionì—ì„œëŠ”, steps ë‹¨ìœ„ ì‚¬ì´ì—ì„œ outputsìœ¼ë¡œ ê°’ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ê²½ìš°ë„ ìˆìœ¼ë‹ˆ, ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤! <ul>
<li>ex) ì• stepì—ì„œ <code>id: create_pr</code>ë¡œ ì§€ì •í•´ë†“ê³ , ë‹¤ìŒ stepì—ì„œ</li>
<li>ex) <code>${{ steps.create_pr.outputs.pr_number }}</code></li>
</ul>
</li>
</ol>
<h3 id="5-contributes">5. Contributes</h3>
<ol start="5">
<li>github-actions[bot]ì€ ì”ë””ì— ë°˜ì˜ì´ ì•ˆëœë‹¤. ì•ˆë˜ë©´,
<code>${{ secrets.GITHUB_TOKEN }}</code>ë‚˜, <code>PAT(Personal Access Token)</code>ë¥¼ ì‚¬ìš©í•´ë³´ì. <br />

</li>
</ol>
<h3 id="6-github_env">6. $GITHUB_ENV</h3>
<ol start="6">
<li>ë‚ ì§œ í˜•ì‹ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê³  ì‹¶ì—ˆë‹¤. ex) [240928]<ul>
<li>ì´ë•Œ shellëª…ë ¹ì–´ë¡œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì£¼ì–´, <code>$GITHUB_ENV</code>ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤!</li>
<li><code>run: echo &quot;PR_DATE=$(date '+%y%m%d')&quot; &gt;&gt; $GITHUB_ENV</code><h2 id="í›„ê¸°">í›„ê¸°</h2>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>ì¼ì£¼ì¼ë™ì•ˆ ì•ˆë¼ì„œ github ë¸”ë¡œê·¸ë¡œë„ ì‹œë„í•´ë³´ê³  ë‚œë¦¬ë¥¼ ë¶€ë ¸ì—ˆë‹¤. <del><strong>ì´ê²ƒë„ í•´ê²°í•  .. í•´ì•¼ì§€..</strong></del></p>
</li>
<li><p>ê·¸ë˜ë„ ì•‰ì€ ìë¦¬ì—ì„œ ë¬¼ ë§ˆì‹œê¸° ì™¸ 6ì‹œê°„ ì•‰ì•„ì„œ ë¶™ì¡ê³  ëŠ˜ì–´ì¡Œë”ë‹ˆ ë¼ì„œ ë‹¤í–‰ì´ë‹¤. ë“œë””ì–´ í¸í•˜ê²Œ ì ì— ë“¤ ìˆ˜ ìˆê² ë‹¤.</p>
</li>
</ul>
<hr />
<ul>
<li>ì˜ëª»ëœ ì½”ë“œë‚˜ ìˆ˜ì •/ê°œì„  ì‚¬í•­ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ì„¸ìš” :D<h2 id="ì‘ì„±í•œ-ì½”ë“œ">ì‘ì„±í•œ ì½”ë“œ</h2>
<h3 id="update_blogyml">update_blog.yml</h3>
</li>
</ul>
<pre><code class="language-yaml">name: Update Blog Posts

on:
  push:
    branches:
      - update-blog-posts-branch
  schedule:
      - cron: '0 */8 * * *'
  workflow_dispatch: 
    inputs: 
      pullRequestNumber:
        description: Pull request number to auto-approve
        required: false

  pull_request:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write


jobs:
  update_blog:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install dependencies
        run: |
          pip install feedparser gitpython

      - name: Configure Git
        run: |
          git config --global user.name 'bsjin1122'
          git config --global user.email 'kitty7579@hanmail.net'

      - name: Run script
        run: python scripts/update_velog.py

      - name: Check for Changes # Git ìƒíƒœ í™•ì¸
        run: |
          git status
          git diff
        id: check_changes

        # Current branch is: refs/heads/update-blog-posts-branch
      - name: Display Current Branch
        run: |
          echo &quot;Current branch is: $GITHUB_REF&quot;

      - name: Set Date Format for PR Title
        run: echo &quot;PR_DATE=$(date '+%y%m%d')&quot; &gt;&gt; $GITHUB_ENV

      - name: Create Pull Request (peter-evans)
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.VELOG_TOKEN }}
          author: bsjin1122 &lt;kitty7579@hanmail.net&gt;
          body: | 
            :satisfied: [Velog ìƒˆ ê²Œì‹œê¸€ í™•ì¸í•˜ê¸°](https://velog.io/@greendev/posts)
          labels: velog
          title: &quot;[${{ env.PR_DATE }}]  Velog ê²Œì‹œê¸€ ì—…ë¡œë“œ&quot;
          branch: main
          base: update-blog-posts-branch
          assignees: bsjin1122
        id: create_pr

      - name: Display PR Number # ë‚ ì§œ í˜•ì‹
        run: |
          echo &quot;Pull Request Number: ${{ steps.create_pr.outputs.pull-request-number }}&quot; 

      - name: PR Auto Merge 
        # PRì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰  
        if: steps.create_pr.outputs.pull-request-number != ''  
        uses: peter-evans/enable-pull-request-automerge@v3
        with:
          token: ${{ secrets.VELOG_TOKEN }}
          pull-request-number: ${{ steps.create_pr.outputs.pull-request-number }}
          # merge-method:

      ########### ì‹œë„ í–ˆë˜ ë°©ë²•ë“¤ -- ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸ë“¤ì…ë‹ˆë‹¤.

      # ë°©ë²•1. PR ìë™ ìŠ¹ì¸
      # - name: PR auto approval
      #   uses: tgymnich/fork-sync@v2.0
      #   with:
      #     token: ${{ secrets.GITHUB_TOKEN }}
      #     owner: bsjin1122
      #     base: main
      #     head: update-blog-posts-branch
      #     pr_message: &quot;velog ì‘ì„± - PR approve ì™„ë£Œ&quot;

      # ë°©ë²•2. PR ìë™ ìŠ¹ì¸ -- ë³¸ì¸ì´ ìƒì„±í•œ prì€ ë³¸ì¸ì´ ìŠ¹ì¸ ëª»í•˜ê²Œ ë§‰ì•„ë‘ 
      # - name: PR ìë™ ìŠ¹ì¸
      #   uses: hmarr/auto-approve-action@v4
      #   with:
      #     github-token: ${{ secrets.GITHUB_TOKEN }}
      #     pull-request-number: ${{ steps.create_pr.outputs.pr_number }}
      #     review-message: &quot;Auto approved automated PR Test&quot;

      # ë°©ë²•3. PR ìë™ ìƒì„± 
      # - name: Create Pull Request
      #   uses: peter-evans/create-pull-request@v3
      #   with:
      #     token: ${{ secrets.GITHUB_TOKEN }}
      #     commit-message: &quot;Velog posts ì—…ë°ì´íŠ¸&quot;
      #     branch: update-blog-posts-branch  # PR ìƒì„± ì‹œ ì‚¬ìš©ë  ë¸Œëœì¹˜ ì´ë¦„
      #     title: &quot;PR ìë™ ìƒì„±&quot;
      #     base: main

      # ë³€ê²½ì‚¬í•­ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰
      # - name: Create Pull Request
      #   uses: diillson/auto-pull-request@v1.0.1
      #   with:
      #     destination_branch: &quot;main&quot;
      #     github_token: ${{ secrets.VELOG_TOKEN }}
      #     pr_label: &quot;velog&quot;
      #     pr_title: &quot;[${{ env.PR_DATE }}]  Velog ê²Œì‹œê¸€ ì—…ë¡œë“œ&quot;
      #     pr_allow_empty: false
      #     pr_body: |
      #       :satisfied: [Velog ìƒˆ ê²Œì‹œê¸€ í™•ì¸í•˜ê¸°](https://velog.io/@greendev/posts)
      #   id: create_pr  


</code></pre>
<hr />
<h3 id="update_velogpy">update_velog.py</h3>
<pre><code class="language-python">import feedparser
import git
import os
import re
from datetime import datetime

# ë²¨ë¡œê·¸ RSS í”¼ë“œ URL
rss_url = 'https://api.velog.io/rss/@greendev'

# ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í† ë¦¬ ê²½ë¡œ
repo_path = '.'
# 'C:/study/velog' # ì‹¤ì œ Git ì €ì¥ì†Œ ê²½ë¡œ

# 'velog-posts' í´ë” ê²½ë¡œ
posts_dir = os.path.join(repo_path, 'velog-posts')

# 'velog-posts' í´ë”ê°€ ì—†ë‹¤ë©´ ìƒì„±
os.makedirs(posts_dir, exist_ok=True)

# ë ˆí¬ì§€í† ë¦¬ ë¡œë“œ
repo = git.Repo(repo_path)

# RSS í”¼ë“œ íŒŒì‹±
feed = feedparser.parse(rss_url)

# í˜„ì¬ ë‚ ì§œì™€ ìš”ì¼ ê°€ì ¸ì˜¤ê¸°
current_date = datetime.now().strftime(&quot;%y%m%d&quot;)
current_day = [&quot;ì›”&quot;, &quot;í™”&quot;, &quot;ìˆ˜&quot;, &quot;ëª©&quot;, &quot;ê¸ˆ&quot;, &quot;í† &quot;, &quot;ì¼&quot;][datetime.now().weekday()]
date_prefix = f&quot;{current_date}{current_day}&quot;

# D-Day ê³„ì‚° (2024ë…„ 9ì›” 9ì¼ ê¸°ì¤€)
base_date = datetime(2024, 9, 9)
dday_diff = (datetime.now() - base_date).days
dday_prefix = f&quot;D+{dday_diff}&quot; if dday_diff &gt;= 0 else f&quot;D{dday_diff}&quot;

# ê° ê¸€ì„ íŒŒì¼ë¡œ ì €ì¥í•˜ê³  ì»¤ë°‹
for entry in feed.entries:
    file_name = entry.title.replace('/', '-').replace('\\', '-')

    # ê²Œì‹œê¸€ ë‚´ìš© í™•ì¸
    post_content = entry.description.strip() if entry.description else None
    if not post_content:
        # print(f&quot;Skipping post '{entry.title}' as it has no content.&quot;)
        continue

    # íŒŒì¼ ì´ë¦„ì—ì„œ ì£¼ì œ(subject) ì¶”ì¶œ
    match = re.search(r'\[(.*?)\]', file_name)
    subject = match.group(1).upper() if match else None # ëŒ€ë¬¸ì ì„¤ì •
    print(subject)

    # ë””ë ‰í† ë¦¬ ì„¤ì •: subjectê°€ ìˆëŠ” ê²½ìš° í•´ë‹¹ ë””ë ‰í† ë¦¬, ì—†ëŠ” ê²½ìš° 'velog-posts'
    if subject:
        subject_dir = os.path.join(posts_dir, subject)
        os.makedirs(subject_dir, exist_ok=True)  # í•´ë‹¹ subject ë””ë ‰í† ë¦¬ ìƒì„±
    else:
        subject_dir = posts_dir

    # Oracle ê´€ë ¨ ê¸€ì¸ ê²½ìš° ORACLE í´ë”ë¡œ ë³€ê²½
    if subject and subject.startswith('ORACLE'):
        subject_dir = os.path.join(posts_dir, 'ORACLE')
        os.makedirs(subject_dir, exist_ok=True)

    # íŒŒì¼ ê²½ë¡œ ì„¤ì •
    file_path = os.path.join(subject_dir, file_name + '.md')

    # ì´ë¯¸ íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ì‘ì—…ì„ ê±´ë„ˆë›°ê¸°
    if os.path.exists(file_path):
        continue

    # íŒŒì¼ ìƒì„± ë° ë‚´ìš© ì‘ì„±
    with open(file_path, 'w', encoding='utf-8') as file:
        file.write(post_content)

    # ê¹ƒí—ˆë¸Œ ì»¤ë°‹
    commit_message = f&quot;[{dday_prefix} | {date_prefix}] {entry.title}&quot;
    repo.git.add(file_path)
    repo.git.commit('-m', commit_message)

# ì»¤ë°‹ ì—¬ë¶€ í™•ì¸ í›„ ë³€ê²½ ì‚¬í•­ì„ í‘¸ì‹œ
if repo.is_dirty(untracked_files=True):
    branch_name = 'update-blog-posts-branch'

    # origin/mainê³¼ í˜„ì¬ ë¡œì»¬ ë¸Œëœì¹˜ì˜ ì°¨ì´ í™•ì¸
    main_branch = 'origin/main'

    # 'origin/main'ê³¼ í˜„ì¬ ìƒíƒœì˜ diff í™•ì¸
    diff_main = repo.git.diff(main_branch)

    if diff_main:  # ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ê²½ìš°ì—ë§Œ push
        print(f&quot;origin/mainê³¼ ë³€ê²½ëœ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. '{branch_name}'ì— pushë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.&quot;)
        repo.git.fetch('origin')
        repo.git.checkout(branch_name)
        repo.git.pull('origin', branch_name, '--rebase')
        repo.git.push('origin', branch_name)
    else:
        print(&quot;origin/mainê³¼ ë³€ê²½ì‚¬í•­ì´ ì—†ìœ¼ë¯€ë¡œ pushí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;)
else:
    print(&quot;Pushí•  ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.&quot;)

# ì¶”í›„ .ymlíŒŒì¼ì—ì„œ í™˜ê²½ë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ì˜ˆì • (ì˜ˆì‹œ ì½”ë“œ)
# with open(os.environ['GITHUB_OUTPUT'], 'a') as f:
#     f.write(f&quot;commit_message={commit_message}\n&quot;)
#     f.write(f&quot;branch_name={branch_name}\n&quot;)
#     f.write(f&quot;file_name={file_name}\n&quot;)
</code></pre>
<ul>
<li>ì°¸ê³ ë¡œ pythonì€ velog í¬ìŠ¤íŒ… ì œëª©ì˜ <code>[ì£¼ì œëª…]</code>ì—ì„œ ëŒ€ê´„í˜¸ë¥¼ ë”°ë¡œ ì¶”ì¶œí•´ì„œ(subjectë¼ëŠ” ë³€ìˆ˜ë¡œ), 
ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì„œ ê¸€ì„ ë¶„ë¥˜í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€ë¡œ ë„£ì—ˆë‹¤.</li>
</ul>
<h2 id="ì´ì–´ì„œ-velog-ì“¸-ìˆ˜-ìˆê² ë‹¤">ì´ì–´ì„œ velog ì“¸ ìˆ˜ ìˆê² ë‹¤...</h2>
<p><img alt="" src="https://velog.velcdn.com/images/greendev/post/59c768de-313a-4585-96b3-0c1227c417f4/image.png" /></p>